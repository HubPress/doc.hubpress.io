<!DOCTYPE html><html lang="en"><head><title>helpers/pagination</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="helpers/pagination"><meta name="groc-project-path" content="src/hubpress/scripts/helpers/pagination.js"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/hubpress/scripts/helpers/pagination.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h3 id="pagination-helper">Pagination Helper</h3>
<p><code>{{pagination}}</code>
Outputs previous and next buttons, along with info about the current page</p></div></div><div class="code"><div class="wrapper"><span class="hljs-keyword">var</span> _               = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash'</span>),
    template        = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./template'</span>),
    pagination;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logAndThrowError</span><span class="hljs-params">(err)</span> </span>{
  <span class="hljs-built_in">console</span>.log(err);
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(err);
}


pagination = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> </span>{
    <span class="hljs-comment">/*jshint unused:false*/</span>
    <span class="hljs-keyword">if</span> (!_.isObject(<span class="hljs-keyword">this</span>.pagination) || _.isFunction(<span class="hljs-keyword">this</span>.pagination)) {
        <span class="hljs-keyword">return</span> logAndThrowError(<span class="hljs-string">'pagination data is not an object or is a function'</span>);
    }

    <span class="hljs-keyword">if</span> (_.isUndefined(<span class="hljs-keyword">this</span>.pagination.page) || _.isUndefined(<span class="hljs-keyword">this</span>.pagination.pages) ||
        _.isUndefined(<span class="hljs-keyword">this</span>.pagination.total) || _.isUndefined(<span class="hljs-keyword">this</span>.pagination.limit)) {
        <span class="hljs-keyword">return</span> logAndThrowError(<span class="hljs-string">'All values must be defined for page, pages, limit and total'</span>);
    }

    <span class="hljs-keyword">if</span> ((!_.isNull(<span class="hljs-keyword">this</span>.pagination.next) &amp;&amp; !_.isNumber(<span class="hljs-keyword">this</span>.pagination.next)) ||
        (!_.isNull(<span class="hljs-keyword">this</span>.pagination.prev) &amp;&amp; !_.isNumber(<span class="hljs-keyword">this</span>.pagination.prev))) {
        <span class="hljs-keyword">return</span> logAndThrowError(<span class="hljs-string">'Invalid value, Next/Prev must be a number'</span>);
    }

    <span class="hljs-keyword">if</span> (!_.isNumber(<span class="hljs-keyword">this</span>.pagination.page) || !_.isNumber(<span class="hljs-keyword">this</span>.pagination.pages) ||
        !_.isNumber(<span class="hljs-keyword">this</span>.pagination.total) || !_.isNumber(<span class="hljs-keyword">this</span>.pagination.limit)) {
        <span class="hljs-keyword">return</span> logAndThrowError(<span class="hljs-string">'Invalid value, check page, pages, limit and total are numbers'</span>);
    }

    <span class="hljs-keyword">var</span> context = _.merge({}, <span class="hljs-keyword">this</span>.pagination);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tag !== <span class="hljs-literal">undefined</span>) {
        context.tagSlug = <span class="hljs-keyword">this</span>.tag.slug;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.author !== <span class="hljs-literal">undefined</span>) {
        context.authorSlug = <span class="hljs-keyword">this</span>.author.slug;
    }

    <span class="hljs-keyword">return</span> template.execute(<span class="hljs-string">'pagination'</span>, context);
};

<span class="hljs-built_in">module</span>.exports = pagination;</div></div></div></div></body></html>